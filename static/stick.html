<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Custom Chart with Chart.js</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  .chart-container {
    width: 70%;
    margin: auto;
    background-color: #f5f5f5;
    padding: 20px;
    border-radius: 10px;
  }
  .legend {
    display: flex;
    justify-content: flex-start;
    align-items: center;
    margin-bottom: 20px;
  }
  .legend-item {
    display: flex;
    align-items: center;
    margin-right: 20px;
  }
  .legend-item span {
    display: inline-block;
    width: 12px;
    height: 12px;
    margin-right: 5px;
    border-radius: 50%;
  }
</style>
</head>
<body>

<div class="chart-container">
  <div class="legend">
    <div class="legend-item"><span style="background-color: #4CAF50;"></span> 전체 차량</div>
    <div class="legend-item"><span style="background-color: #FFC107;"></span> 노란 차량</div>
    <div class="legend-item"><span style="background-color: #2196F3;"></span> 일반 차량</div>
  </div>
  <canvas id="myChart"></canvas>
</div>

<script>
  const ctx = document.getElementById('myChart').getContext('2d');

  const data = {
    labels: ['25 인승', '47 인승', '33 인승', '29 인승'],
    datasets: [{
      label: '전체 차량',
      data: [25, 47, 33, 29],
      backgroundColor: '#4CAF50',
      hoverBackgroundColor: '#66BB6A',
      stack: 'Stack 0',
    }, {
      label: '노란 차량',
      data: [16, 21, 25, 45],
      backgroundColor: '#FFC107',
      hoverBackgroundColor: '#FFEB3B',
      stack: 'Stack 1',
    }]
  };

  const options = {
    responsive: true,
    plugins: {
      tooltip: {
        enabled: true,
        callbacks: {
          label: function(context) {
            return context.parsed.y + ' 인승';
          }
        }
      },
      legend: {
        display: false
      }
    },
    scales: {
      x: {
        beginAtZero: true,
        stacked: true,
        grid: {
          display: false
        }
      },
      y: {
        beginAtZero: true,
        stacked: true,
        grid: {
          display: false
        }
      }
    }
  };

  const myChart = new Chart(ctx, {
    type: 'bar',
    data: data,
    options: options
  });

  // Custom labels
  const meta = myChart.getDatasetMeta(0);
  const xOffset = 10;
  const yOffset = 10;
  meta.data.forEach((bar, index) => {
    const data = myChart.data.datasets[0].data[index];
    const position = bar.tooltipPosition();
    ctx.fillStyle = '#000';
    ctx.fillText(data + ' 인승', position.x + xOffset, position.y - yOffset);
  });

</script>

</body>
</html>